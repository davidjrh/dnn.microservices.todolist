var mytemplate={};mytemplate["index.html"]='<div id="TodoList" class="todolist-container" data-bind="with: dnnservices.todoList">\n  <h1>\n    <span class="glyphicon glyphicon-list-alt"></span> To Do List\n  </h1>\n  <div class="spinner" data-bind="visible: loading()" ></div>\n  <div class="check-list-container">\n      <div class="check-list-item-container">\n          <ul class="check-list">\n              <!-- ko foreach: items -->\n              <li class="check-list-item" data-bind="visible: !Complete(), click: completeTask">\n                  <span class="glyphicon glyphicon-check" aria-hidden="false"></span>\n                  <span data-bind="text: Text"></span>\n              </li>\n              <!-- /ko -->\n          </ul>\n      </div>\n  </div>\n\n  <hr class="" />\n  <div class="controls-container">\n    <div class="form-group">\n      <input id="Text" type="text" class="form-control" placeholder="Task"/>\n      <button class="dnnPrimaryAction" data-bind="click: addItem">Add Item</button>\n    </div>\n  </div>\n</div>\n',"undefined"==typeof dnnservices&&(dnnservices={}),dnnservices.todoListApiUrl="http://localhost:21140/api/todoitems",dnnservices.todoListUrl="http://localhost:21345/dist/","undefined"==typeof dnnservices&&(dnnservices={}),dnnservices.filesloaded="",dnnservices.todoList=null,dnnservices.loadcss=function(css){if(-1===dnnservices.filesloaded.indexOf("["+css+"]")){var head=document.getElementsByTagName("head")[0];if(null!==head&&"undefined"!=typeof head){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",css),head.appendChild(n),dnnservices.filesloaded+="["+css+"]"}}},dnnservices.loadjs=function(js){if(-1===dnnservices.filesloaded.indexOf("["+js+"]")){var head=document.getElementsByTagName("head")[0];if(null!==head&&"undefined"!=typeof head){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",js),head.appendChild(n),dnnservices.filesloaded+="["+js+"]"}}},dnnservices.TodoListManagerOptions=function(o){return{container:o.container||document.body,loaddependencies:o.loaddependencies||!1}},dnnservices.TodoListManager=function(o){var that=this;this.options=new dnnservices.TodoListManagerOptions(o),that.options.loaddependencies&&(dnnservices.loadcss(dnnservices.todoListUrl+"lib/bootstrap/dist/css/bootstrap.min.css"),dnnservices.loadcss(dnnservices.todoListUrl+"lib/bootstrap/dist/css/bootstrap-theme.min.css"),dnnservices.loadjs(dnnservices.todoListUrl+"lib/bootstrap/dist/js/bootstrap.min.js")),dnnservices.loadcss(dnnservices.todoListUrl+"css/todolist.min.css"),this.init=function(container){var c=container||that.options.container;"undefined"!=typeof c&&(c.innerHTML=mytemplate["index.html"]),dnnservices.todoList=new dnnservices.TodoList,ko.applyBindings(dnnservices.todoList,c),dnnservices.todoList.init()}},dnnservices.TodoList=function(){var that=this,apiPath=dnnservices.todoListApiUrl;this.ItemModel=function(id,text,complete,createdAt,updatedAt){var thisObject=this;this.Id=ko.observable(id),this.Text=ko.observable(text),this.Complete=ko.observable(complete),this.CreatedAt=ko.observable(createdAt),this.UpdatedAt=ko.observable(updatedAt),this.completeTask=function(){thisObject.Complete(!0),that.saveItem(thisObject)}},this.loading=ko.observable(!1),this.items=ko.observableArray([]),this.init=function(){that.getItems()},this.getItems=function(){that.loading(!0),jQuery.getJSON(apiPath,null,function(items){that.items.removeAll(),items.forEach(function(item){that.items.push(new that.ItemModel(item.Id,item.Text,item.Complete,item.CreatedAt,item.UpdatedAt))}),that.loading(!1)})},this.addItem=function(){var item=new that.ItemModel("",jQuery("#Text").val(),!1,"","");jQuery.ajax({method:"POST",dataType:"json",url:apiPath,data:{Id:item.Id(),Text:item.Text()},success:function(){that.getItems()}})},this.saveItem=function(item){jQuery.ajax({method:"POST",dataType:"json",url:apiPath+"/"+item.Id(),success:function(){that.getItems()}})}};